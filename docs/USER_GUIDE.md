# DroidCam Stream Deck Plugin ユーザーガイド

## 目次
1. [はじめに](#はじめに)
2. [セットアップ](#セットアップ)
3. [各アクションの詳細](#各アクションの詳細)
4. [使用例とベストプラクティス](#使用例とベストプラクティス)
5. [トラブルシューティング](#トラブルシューティング)

## はじめに

DroidCam Stream Deck Pluginは、スマートフォンのカメラをWebカメラとして使用できるDroidCamアプリをStream Deckから制御するためのプラグインです。配信やビデオ会議中に、手元のStream Deckボタンでカメラ設定を素早く調整できます。

## セットアップ

### 前提条件

1. **DroidCamアプリのインストール**
   - [Android版](https://play.google.com/store/apps/details?id=com.dev47apps.droidcam)
   - [iOS版](https://apps.apple.com/app/droidcam-webcam/id1510258102)
   - PC側クライアント（必要に応じて）

2. **ネットワーク接続**
   - スマートフォンとPCが同じネットワークに接続されていること
   - ファイアウォールでポート4747が開放されていること

### 初期設定手順

#### ステップ1: DroidCamの起動
1. スマートフォンでDroidCamアプリを起動
2. 画面に表示される「WiFi IP」と「Port」をメモ
   - 例: `192.168.1.100:4747`

#### ステップ2: 接続設定
1. Stream Deckで「DroidCam」カテゴリから「接続状態」アクションを追加
2. Property Inspectorで以下を設定：
   - **IPアドレス**: DroidCamに表示されたIP（例: `192.168.1.100`）
   - **ポート**: 通常は`4747`（変更していない場合）
   - **自動チェック間隔**: 5秒（推奨）
3. 「接続テスト」ボタンをクリックして接続確認

## 各アクションの詳細

### 📡 接続・状態監視

#### 接続状態 (Connection Status)
- **機能**: DroidCamへの接続状態をリアルタイム表示
- **表示**: 
  - 🔴 切断中
  - 🟢 接続中（デバイス名表示）
- **設定項目**:
  - IPアドレス/ホスト名
  - ポート番号
  - 自動チェック間隔

#### バッテリー状態 (Battery Status)
- **機能**: スマートフォンのバッテリー残量を表示
- **表示**: 
  - パーセンテージと充電状態
  - 色分け（緑: 十分、黄: 注意、赤: 危険）
- **設定項目**:
  - 警告レベル（デフォルト: 30%）
  - 危険レベル（デフォルト: 15%）

### 📸 基本カメラ制御

#### カメラ切り替え (Camera Switch)
- **機能**: 前面/背面カメラの切り替え
- **動作**: ボタンを押すたびにカメラが切り替わる
- **表示**: 現在使用中のカメラをアイコンで表示

#### LEDフラッシュ (LED Toggle)
- **機能**: カメラのLEDライト制御
- **動作**: ON/OFFトグル
- **用途**: 暗い場所での照明として使用

#### マイク制御 (Mic Toggle)
- **機能**: マイクのミュート/解除
- **表示**: 
  - 🔇 ミュート中
  - 🔊 音声ON

### 🎯 フォーカス制御

#### オートフォーカス (Autofocus)
- **機能**: オートフォーカスを手動でトリガー
- **用途**: ピントが合わない時の再調整

#### フォーカスモード (Focus Mode)
- **機能**: AFモードの切り替え
- **モード**:
  - **Normal**: 通常のAF
  - **Macro**: 接写モード
  - **Continuous**: 動体追従AF
  - **Infinity**: 無限遠固定

### 🎨 ホワイトバランス制御

#### WBモード (White Balance Mode)
- **機能**: ホワイトバランスプリセットの切り替え
- **プリセット**:
  - Auto: 自動調整
  - Incandescent: 白熱灯（暖色）
  - Fluorescent: 蛍光灯
  - Warm Fluorescent: 温白色蛍光灯
  - Daylight: 昼光
  - Cloudy: 曇り
  - Twilight: 夕暮れ
  - Shade: 日陰
  - Manual: 手動調整（0-100）

#### WBロック (WB Lock)
- **機能**: 現在のホワイトバランスを固定
- **用途**: 照明が変わっても色温度を維持したい場合

### 📊 露出・ズーム制御

#### ズーム制御 (Zoom Control) - ダイアル専用
- **機能**: 無段階ズーム調整
- **操作**:
  - ダイアル回転: ズームイン/アウト
  - ダイアル押し込み: 1.0xにリセット
- **範囲**: 1.0x〜8.0x
- **設定**: 感度調整（0.01〜3.0）

#### 露出制御 (Exposure Control) - ダイアル専用
- **機能**: 露出補正の微調整
- **操作**:
  - ダイアル回転: 明るさ調整
  - ダイアル押し込み: ±0にリセット
- **範囲**: -2.0〜+2.0 EV
- **設定**: 感度調整（0.1〜5.0）

#### ズームボタン (Zoom Button)
- **機能**: プリセットズーム値の切り替え
- **設定**: カンマ区切りで複数値を設定
- **例**: `1.0, 2.0, 4.0, 8.0`

#### 露出ボタン (Exposure Button)
- **機能**: プリセット露出値の切り替え
- **設定**: カンマ区切りで複数値を設定
- **例**: `-2.0, -1.0, 0, 1.0, 2.0`

#### 露出ロック (Exposure Lock)
- **機能**: 現在の露出設定を固定
- **用途**: 明るさが変化する環境での撮影

### ⚙️ システム制御

#### 停止/再開 (Stop/Restart)
- **機能**: DroidCamアプリの停止と再起動
- **用途**: 
  - 一時的にカメラを停止
  - 接続不良時のリセット
- **表示**: 動作状態をアイコンで表示

## 使用例とベストプラクティス

### 配信用レイアウト例

```
[接続状態]  [バッテリー]   [停止/再開]
[カメラ切替] [マイク]      [LED]
[AF実行]    [露出ロック]   [WBロック]
[ズーム🎛]  [露出🎛]      [WBモード]
```

### シチュエーション別設定

#### 📹 ビデオ会議
- **推奨設定**:
  - フォーカスモード: Continuous（動体追従）
  - WBモード: Auto
  - 露出: ±0
  - ズーム: 1.0x〜1.5x

#### 🎮 ゲーム配信
- **推奨設定**:
  - フォーカスモード: Normal
  - WBモード: 照明に合わせて固定
  - 露出ロック: ON
  - マイク: 別途高品質マイク使用推奨

#### 📚 オンライン授業
- **推奨設定**:
  - ズーム: ホワイトボード全体が映る倍率
  - フォーカスモード: Infinity（黒板撮影時）
  - LED: 必要に応じてON

### Pro版限定機能

以下の機能はDroidCam Pro版が必要です：
- ズーム制御（すべてのズーム関連機能）
- 露出制御（すべての露出関連機能）
- 高画質モード（720p/1080p）

## トラブルシューティング

### よくある問題と解決方法

#### 接続できない
1. **IPアドレスの確認**
   - DroidCamアプリで表示されるIPと一致しているか
   - pingコマンドで疎通確認: `ping 192.168.1.100`

2. **ファイアウォール設定**
   - ポート4747が開放されているか
   - Windows Defenderやセキュリティソフトの設定確認

3. **ネットワーク確認**
   - PCとスマートフォンが同じWi-Fiに接続されているか
   - ルーターのアイソレーション機能が無効になっているか

#### ボタンが反応しない
- **Pro版の確認**: ズーム/露出機能はPro版限定
- **接続状態**: 接続状態ボタンが緑色になっているか確認
- **DroidCamアプリ**: アプリが前面で動作しているか確認

#### 映像が遅延する
- **解像度設定**: DroidCamアプリで解像度を下げる
- **ネットワーク品質**: 5GHz Wi-Fiの使用を推奨
- **バックグラウンドアプリ**: 不要なアプリを終了

### エラーメッセージ対応

| エラーメッセージ | 原因 | 対処法 |
|---|---|---|
| Connection failed: 550 | Pro版限定機能 | DroidCam Proを購入 |
| Connection timeout | ネットワーク不通 | IP/ポート設定確認 |
| Device not found | DroidCamが起動していない | アプリを起動 |

### ログの確認方法

macOSの場合：
```bash
./watch-log.sh
```

Windowsの場合：
```
%appdata%\Elgato\StreamDeck\logs\
```

## サポート

問題が解決しない場合は、以下の情報を添えてサポートにお問い合わせください：

1. Stream Deckのバージョン
2. DroidCamのバージョン（スマートフォン側）
3. エラーメッセージやログ
4. 使用環境（OS、ネットワーク構成）

**サポート連絡先**:
- GitHub Issues: [報告はこちら](https://github.com/yourusername/streamdeck-droidcam/issues)
- Email: support@nantoka.works

---

最終更新: 2025年1月